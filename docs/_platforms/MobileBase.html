

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CAN Interface &mdash; Weston Robot V0.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #323640" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../_communication/communication.html">Introduction: ROS to CAN/Serial interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../_communication/communication.html#can-serial-interface">CAN/Serial Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_communication/communication.html#ros-interface">ROS Interface</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="wheeled/scout/scout.html">Scout Mobile Robot</a><ul>
<li class="toctree-l2"><a class="reference internal" href="wheeled/scout/scout.html#get-to-know-the-robot">Get to Know the Robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="wheeled/scout/scout.html#pre-operational-check">Pre-operational Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="wheeled/scout/scout.html#power-up-and-manual-control">Power-up and Manual Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="wheeled/scout/scout.html#onboard-control">Onboard Control</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="wheeled/hunter/hunter.html">Hunter Mobile Robot</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tracked/bunker.html">Bunker Mobile Robot</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tracked/bunker.html#basic-operations">Basic Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="tracked/bunker.html#ros-interface">ROS Interface</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="legged/a1.html">A1 Robot Dog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="legged/a1.html#basic-operations">Basic Operations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="legged/aliengo.html">Aliengo Robot Dog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="legged/aliengo.html#basic-operations">Basic Operations</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Weston Robot</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>CAN Interface</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/_platforms/MobileBase.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="can-interface">
<h1>CAN Interface<a class="headerlink" href="#can-interface" title="Permalink to this headline">¶</a></h1>
<p>Information on CAN bus can be found in <a class="reference external" href="https://www.youtube.com/watch?v=FqLDpHsxvf8">https://www.youtube.com/watch?v=FqLDpHsxvf8</a> and <a class="reference external" href="https://en.wikipedia.org/wiki/CAN_bus">https://en.wikipedia.org/wiki/CAN_bus</a>.</p>
<p>Many protocols for communication through the CAN bus is similar for different platforms.
As such, a abstract class <cite>MobileBase</cite> was designed as the super class of the CAN interface class for each robot model.</p>
<p>On the level of <cite>MobileBase</cite> the following is settled:</p>
<ol class="arabic simple">
<li><p>Setting up CAN connection</p></li>
<li><p>Disconnecting CAN connection</p></li>
<li><p>Maintaining stream of CAN Frames</p></li>
</ol>
<div class="section" id="setting-up-can-connection">
<h2>Setting up CAN connection<a class="headerlink" href="#setting-up-can-connection" title="Permalink to this headline">¶</a></h2>
<p>During the setting up of CAN connection, the protocol used to read the CAN Frame will be set.
Since each platform will process CAN Frames differently, each platform will write its own ParseCANFrame(can_frame <a href="#id1"><span class="problematic" id="id2">*</span></a>rx_frame) function.
The calling</p>
<p>To ensure the safe operation of the robot, a steady stream of commands from the computer and the onboard embedded controller is required.
This is to ensure that if communication is lost, the robot would not be stuck executing the previously sent command,
and instead the robot will stop moving.</p>
</div>
<div class="section" id="disconnecting-can-connection">
<h2>Disconnecting CAN connection<a class="headerlink" href="#disconnecting-can-connection" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="maintaining-stream-of-can-frames">
<h2>Maintaining stream of CAN Frames<a class="headerlink" href="#maintaining-stream-of-can-frames" title="Permalink to this headline">¶</a></h2>
<p>The control of this continuous stream of CAN Frames being sent to the embedded controller is controlled by the MobileBase in the
<cite>void MobileBase::ControlLoop(int32_t period_ms)</cite> function. However, the types CAN Frames to be sent varies between robots.
Therefore, the actual function designed to send each message is determined by each platform in the <cite>SendRobotCmd()</cite> function
i.e. Each platform designs is CAN Frame sending protocol while the maintaining of the loop is on the MobileRobot abstract class.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Weston Robot Pte Ltd

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>